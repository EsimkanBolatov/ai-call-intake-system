# üöÄ –ó–ê–ü–£–°–ö AI CALL INTAKE SYSTEM –û–î–ù–û–ô –ö–û–ú–ê–ù–î–û–ô

## üìã –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ Docker Compose:

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install -y docker.io docker-compose
sudo systemctl start docker
sudo systemctl enable docker

# –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER
# –í—ã–π–¥–∏—Ç–µ –∏ –∑–∞–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
newgrp docker
```

### 2. –°–∫–∞—á–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:

```bash
git clone <–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π>
cd ai-call-intake-system
```

## üéØ –ó–ê–ü–£–°–ö –°–ò–°–¢–ï–ú–´ –û–î–ù–û–ô –ö–û–ú–ê–ù–î–û–ô

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:

```bash
chmod +x run_full_system.sh && ./run_full_system.sh start
```

### –ò–ª–∏ –ø–æ—à–∞–≥–æ–≤–æ:

```bash
# 1. –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x run_full_system.sh

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
./run_full_system.sh start

# 3. –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–æ—Å–∏—Ç OpenAI API –∫–ª—é—á
# –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–ª—é—á: YOUR_OPENAI_API_KEY_HERE

# 4. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```

## ‚è± –ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢ –ü–†–ò –ó–ê–ü–£–°–ö–ï

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É Docker –∏ Docker Compose
2. ‚úÖ –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç OpenAI API –∫–ª—é—á (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω)
3. ‚úÖ –°–æ–∑–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç 8 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
   - **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
   - **Redis** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - **Asterisk** - —Ç–µ–ª–µ—Ñ–æ–Ω–∏—è
   - **AI Backend** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–≤–æ–Ω–∫–æ–≤
   - **Dashboard** - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - **Nginx** - reverse proxy
   - **Prometheus** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
   - **Grafana** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
5. ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å–µ—Ç—å –∏ –ø–æ—Ä—Ç—ã
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
7. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

## üåê –î–û–°–¢–£–ü –ö –°–ò–°–¢–ï–ú–ï –ü–û–°–õ–ï –ó–ê–ü–£–°–ö–ê

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ—é—Ç—Å—è:

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:

- **Dashboard**: `http://–≤–∞—à-ip/` (–ª–æ–≥–∏–Ω: `admin`, –ø–∞—Ä–æ–ª—å: `ChangeMe123!`)
- **API**: `http://–≤–∞—à-ip/api`
- **Prometheus**: `http://–≤–∞—à-ip:9090`
- **Grafana**: `http://–≤–∞—à-ip:3000` (–ª–æ–≥–∏–Ω: `admin`, –ø–∞—Ä–æ–ª—å: `admin`)

### –¢–µ–ª–µ—Ñ–æ–Ω–∏—è:

- **SIP —Å–µ—Ä–≤–µ—Ä**: `–≤–∞—à-ip:5060`
- **–¢–µ—Å—Ç–æ–≤—ã–π –Ω–æ–º–µ—Ä**: `500`
- **–ü–∞—Ä–æ–ª—å**: `500`
- **RTP –ø–æ—Ä—Ç—ã**: `10000-20000`

## üìû –¢–ï–°–¢–û–í–´–ô –ó–í–û–ù–û–ö

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Docker –∫–æ–º–∞–Ω–¥—É

```bash
docker-compose exec asterisk asterisk -rx "channel originate Local/500@internal-test application Playback hello-world"
```

### –°–ø–æ—Å–æ–± 2: –° SIP —Ç–µ–ª–µ—Ñ–æ–Ω–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SIP —Å–æ—Ñ—Ç—Ñ–æ–Ω (MicroSIP, Zoiper)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ:
   - –°–µ—Ä–≤–µ—Ä: `–≤–∞—à-ip`
   - –ü–æ—Ä—Ç: `5060`
   - –õ–æ–≥–∏–Ω: `500`
   - –ü–∞—Ä–æ–ª—å: `500`
3. –ü–æ–∑–≤–æ–Ω–∏—Ç–µ –Ω–∞ –Ω–æ–º–µ—Ä `500`

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://–≤–∞—à-ip/`
2. –í–æ–π–¥–∏—Ç–µ —Å –ª–æ–≥–∏–Ω–æ–º `admin` –∏ –ø–∞—Ä–æ–ª–µ–º `ChangeMe123!`
3. –ù–∞–∂–º–∏—Ç–µ "–¢–µ—Å—Ç–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫" –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üõ† –ö–û–ú–ê–ù–î–´ –£–ü–†–ê–í–õ–ï–ù–ò–Ø

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```bash
./run_full_system.sh status      # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
./run_full_system.sh stop        # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
./run_full_system.sh restart     # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
./run_full_system.sh update      # –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
./run_full_system.sh backup      # –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
./run_full_system.sh cleanup     # –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
```

### –ò–ª–∏ Docker –∫–æ–º–∞–Ω–¥—ã:

```bash
docker-compose ps               # –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose logs -f asterisk # –õ–æ–≥–∏ Asterisk
docker-compose logs -f ai-backend # –õ–æ–≥–∏ AI –±—ç–∫–µ–Ω–¥–∞
docker-compose down             # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose up -d            # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ñ–∞–π–ª `.env.docker`):

```env
OPENAI_API_KEY=–≤–∞—à-–∫–ª—é—á
DASHBOARD_SECRET_KEY=—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á
GRAFANA_PASSWORD=admin
```

### –ü–æ—Ä—Ç—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

- `80` - HTTP (Dashboard –∏ API)
- `443` - HTTPS (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω SSL)
- `5060` - SIP
- `5061` - SIP TLS
- `5000` - Dashboard –Ω–∞–ø—Ä—è–º—É—é
- `8000` - API –Ω–∞–ø—Ä—è–º—É—é
- `3000` - Grafana
- `9090` - Prometheus
- `10000-20000` - RTP (–∞—É–¥–∏–æ)

## üêõ –£–°–¢–†–ê–ù–ï–ù–ò–ï –ù–ï–ü–û–õ–ê–î–û–ö

### –ü—Ä–æ–±–ª–µ–º–∞: Docker –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç 80 –∑–∞–Ω—è—Ç

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥—Ä—É–≥–∏–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—ã
sudo systemctl stop nginx apache2
# –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ docker-compose.yml
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏

```bash
# –£–≤–µ–ª–∏—á—å—Ç–µ swap —Ñ–∞–π–ª
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

### –ü—Ä–æ–±–ª–µ–º–∞: OpenAI API –∫–ª—é—á –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á
curl https://api.openai.com/v1/models \
  -H "Authorization: Bearer –≤–∞—à-–∫–ª—é—á"

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
export OPENAI_API_KEY=sk-test-key
./run_full_system.sh restart
```

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –õ–û–ì–ò

### –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:

```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose logs -f asterisk
docker-compose logs -f ai-backend
docker-compose logs -f dashboard
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Grafana:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://–≤–∞—à-ip:3000`
2. –í–æ–π–¥–∏—Ç–µ —Å `admin/admin`
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã –∏–∑ `/monitoring/grafana/dashboards/`

### –ú–µ—Ç—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ Prometheus:

- –û—Ç–∫—Ä–æ–π—Ç–µ `http://–≤–∞—à-ip:9090`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PromQL –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

## üíæ –ë–≠–ö–ê–ü –ò –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï

### –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞:

```bash
./run_full_system.sh backup
# –°–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª: backups/ai-call-backup-YYYYMMDD_HHMMSS.tar.gz
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞:

```bash
./run_full_system.sh restore backups/ai-call-backup-20251230_120000.tar.gz
```

## üöÄ –ë–´–°–¢–†–´–ï –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø

```bash
# –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
git clone <—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π> && cd ai-call-intake-system && \
chmod +x run_full_system.sh && ./run_full_system.sh start

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
IP=$(hostname -I | awk '{print $1}') && \
echo "Dashboard: http://$IP/" && \
echo "Grafana: http://$IP:3000" && \
echo "SIP: $IP:5060 (–ª–æ–≥–∏–Ω: 500, –ø–∞—Ä–æ–ª—å: 500)"

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫
docker-compose exec asterisk asterisk -rx "channel originate Local/500@internal-test application Playback hello-world"
```

## ‚úÖ –°–ò–°–¢–ï–ú–ê –ó–ê–ü–£–©–ï–ù–ê –ò –ì–û–¢–û–í–ê –ö –†–ê–ë–û–¢–ï!

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç:

1. ‚úÖ –ü—Ä–∏–Ω–∏–º–∞—Ç—å SIP –∑–≤–æ–Ω–∫–∏ –Ω–∞ –ø–æ—Ä—Ç 5060
2. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º/—Ä—É—Å—Å–∫–æ–º
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OpenAI –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ—á–∏
4. ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã
5. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL
6. ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
7. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Grafana

**–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Å—Ç–æ –ø–æ–∑–≤–æ–Ω–∏—Ç–µ –Ω–∞ –Ω–æ–º–µ—Ä 500!**
