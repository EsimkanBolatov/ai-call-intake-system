; Asterisk SIP configuration for AI Call Intake System
; This configures SIP trunk for incoming calls to private number

[general]
context=incoming                  ; default context for incoming calls
allowoverlap=no                   ; disable overlap sending
udpbindaddr=0.0.0.0:5060          ; bind to all interfaces
tcpenable=no                      ; disable TCP (enable if needed)
transport=udp                     ; use UDP transport
srvlookup=no                      ; disable DNS SRV lookups
maxexpiry=3600
defaultexpiry=120
minexpiry=60
notifymimetype=text/plain
allow=ulaw,alaw,gsm              ; codecs in order of preference
language=ru                       ; default language
directmedia=no                    ; for better NAT handling
directrtpsetup=no
rtcachefriends=yes
rtsavesysname=yes
rtautoclear=yes

; SIP trunk for incoming calls from provider
; Replace with your actual SIP provider settings
[provider-trunk]
type=peer
host=sip.provider.com             ; your SIP provider host
defaultuser=your_username
secret=your_password
fromuser=your_username
fromdomain=sip.provider.com
context=incoming                  ; send calls to [incoming] context
insecure=port,invite
canreinvite=no
dtmfmode=rfc2833
disallow=all
allow=ulaw,alaw,gsm
qualify=yes
qualifyfreq=60
nat=force_rport,comedia

; SIP endpoint for softphones/internal testing
[softphone]
type=friend
host=dynamic
secret=test123
context=internal-test
disallow=all
allow=ulaw,alaw
dtmfmode=rfc2833
qualify=yes
nat=force_rport,comedia

; Internal extension for monitoring/control
[monitor]
type=friend
host=dynamic
secret=monitor456
context=utilities
disallow=all
allow=ulaw
dtmfmode=rfc2833

; Template for future extensions
[template](!)
type=friend
host=dynamic
context=internal-test
disallow=all
allow=ulaw,alaw
dtmfmode=rfc2833

; Registration to SIP provider (if required)
[provider-registration]
type=registration
outbound_auth=provider-trunk
server_uri=sip:sip.provider.com
client_uri=sip:your_username@sip.provider.com
contact_user=your_username
expiration=300
retry_interval=60

; SIP settings for RTP (audio)
[rtp]
rtpstart=10000
rtpend=20000
stunaddr=stun.l.google.com:19302  ; STUN server for NAT traversal

; Jitter buffer configuration
[jitterbuffer]
jbenable=yes
jbforce=no
jbmaxsize=200
jbresyncthreshold=1000
jbimpl=fixed
jblog=no