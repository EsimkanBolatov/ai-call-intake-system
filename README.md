# AI Call Intake System

Полнофункциональная информационная система для приёма, классификации и регистрации обращений граждан с использованием AI.

## Архитектура

Система состоит из следующих компонентов:

- **Frontend**: React SPA с Material UI, графиками и картами
- **Backend**: NestJS REST API с JWT аутентификацией, TypeORM, PostgreSQL
- **AI‑модуль**: Python FastAPI с моделями распознавания речи (Whisper) и NLP‑классификации
- **База данных**: PostgreSQL + Redis для кэша и очередей
- **Хранилище файлов**: MinIO/S3 для аудиозаписей
- **Административная панель**: Управление пользователями, ролями, маршрутизацией
- **Интеграции**: REST API для взаимодействия с внешними системами (полиция, акимат, прокуратура)

## Быстрый старт

### Требования

- Docker & Docker Compose
- Node.js 18+ (для локальной разработки)
- Python 3.11+ (для AI‑модуля)

### Запуск через Docker Compose

```bash
cd deployment
docker-compose up -d
```

Сервисы будут доступны:

- Frontend: http://localhost:5173
- Backend API: http://localhost:3000
- Swagger UI: http://localhost:3000/api/docs
- AI‑модуль: http://localhost:8001
- MinIO Console: http://localhost:9001 (логин: minioadmin, пароль: minioadmin)
- PostgreSQL: localhost:5432 (пользователь: postgres, пароль: postgres)
- Redis: localhost:6379

### Локальная разработка

#### Backend

```bash
cd backend
npm install
cp .env.example .env
npm run start:dev
```

#### Frontend

```bash
cd frontend
npm install
npm run dev
```

#### AI‑модуль

```bash
cd ai-module
python -m venv venv
source venv/bin/activate  # или venv\Scripts\activate на Windows
pip install -r requirements.txt
uvicorn main:app --reload --port 8001
```

## Основные функции

### 1. Приём обращений

- Запись аудио через SIP/VoIP или загрузка файлов
- Автоматическая транскрипция речи (русский/казахский)
- Создание электронного дела (case)

### 2. AI‑обработка

- Распознавание речи (Whisper, Google Speech‑to‑Text)
- NLP‑классификация по типу нарушения
- Определение приоритета (низкий/средний/высокий)
- Определение ответственного органа

### 3. Маршрутизация

- Автоматическое направление дела в соответствующий госорган
- Отправка уведомлений через API
- Отслеживание статусов

### 4. Журнал обращений

- Просмотр всех обращений с фильтрами
- Аудиоплеер и транскрипция
- История обработки и комментарии

### 5. Аналитика

- Диаграммы и графики по типам нарушений
- Тепловая карта инцидентов
- KPI: среднее время реакции, количество обращений и т.д.

### 6. Администрирование

- Управление пользователями и ролями (RBAC)
- Настройка маршрутизации
- Просмотр логов аудита

## API документация

После запуска backend доступна Swagger‑документация по адресу http://localhost:3000/api/docs.

Основные эндпоинты:

- `POST /auth/login` – аутентификация
- `GET /cases` – список обращений
- `POST /cases` – создание обращения
- `POST /ai/transcribe` – транскрипция аудио
- `POST /ai/classify` – классификация текста

## Безопасность

- JWT‑аутентификация с refresh‑токенами
- RBAC (роли: admin, operator, analyst, org_admin)
- Валидация всех входящих данных
- Логирование всех действий
- Защита от XSS, CSRF, SQL‑инъекций

## Масштабирование

Система спроектирована для горизонтального масштабирования:

- Микросервисная архитектура
- Кэширование через Redis
- Очереди задач (Bull) для фоновой обработки
- Контейнеризация (Docker) и оркестрация (Kubernetes)

## Лицензия

Проприетарная. Разработано для государственных нужд.

## Контакты

По вопросам разработки и внедрения обращаться к команде проекта.
